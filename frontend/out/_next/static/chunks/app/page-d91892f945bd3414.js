(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2589:(e,l,t)=>{Promise.resolve().then(t.bind(t,4706))},4706:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>d});var a=t(5155);async function s(e){let l=new FormData;l.append("image",e),console.log("".concat("http://192.168.1.220:5000","/api/invoice"));let t=await fetch("".concat("http://192.168.1.220:5000","/api/invoice"),{method:"POST",body:l});if(!t.ok)throw Error("Upload failed");return t.json()}var i=t(2115),n=t(6766);let c={src:"/_next/static/media/gallery.0cd7bf33.svg",height:24,width:24,blurWidth:0,blurHeight:0},r={src:"/_next/static/media/camera.3134af27.svg",height:24,width:24,blurWidth:0,blurHeight:0};function o(e){let{onClose:l,setChooise:t}=e,s=e=>{t(e),l()};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-end justify-center",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-md p-4 rounded-t-2xl shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Upload Photo"}),(0,a.jsxs)("button",{className:"w-full py-3 mb-2 bg-blue-600 text-white rounded-md",onClick:()=>{s("gallery")},children:["Select from Gallery  ",(0,a.jsx)(n.default,{priority:!0,src:c,alt:"Gallery",className:"inline ml-5 mb-1"})]}),(0,a.jsxs)("button",{className:"w-full py-3 mb-2 bg-green-600 text-white rounded-md",onClick:()=>{s("camera")},children:["Take Photo ",(0,a.jsx)(n.default,{priority:!0,src:r,alt:"Camera",className:"inline ml-5 mb-1"})]}),(0,a.jsx)("button",{className:"w-full py-3 text-gray-500 mt-2",onClick:l,children:"Cancel"})]})})}function d(){let e=(0,i.useRef)(null),l=(0,i.useRef)(null),[t,n]=(0,i.useState)(null),[c,r]=(0,i.useState)(!1),d=e=>{var l,t;let a=null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(l=t.files)||void 0===l?void 0:l[0];a&&(n(URL.createObjectURL(a)),s(a).then(e=>{console.log(e)}).catch(e=>{console.log(e)}))};return(0,a.jsxs)("main",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Select an image"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>r(!0),children:"Upload ticket. Now!"}),(0,a.jsx)("input",{type:"file",accept:"image/*",ref:l,className:"hidden",onChange:d}),(0,a.jsx)("input",{type:"file",accept:"image/*",ref:e,className:"hidden",capture:"environment",onChange:d}),t&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("p",{className:"mb-2 text-center",children:"Preview:"}),(0,a.jsx)("img",{src:t,alt:"Captured or Selected",className:"max-w-xs rounded-lg border border-gray-600 shadow-lg"})]}),c&&(0,a.jsx)(o,{onClose:()=>r(!1),setChooise:t=>{var a,s;"gallery"===t?null===(a=l.current)||void 0===a||a.click():"camera"===t&&(null===(s=e.current)||void 0===s||s.click())}})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[766,441,684,358],()=>l(2589)),_N_E=e.O()}]);